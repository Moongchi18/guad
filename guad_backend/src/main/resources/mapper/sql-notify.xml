<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="auction.guad.mapper.NotifyMapper">

	<!-- 신고접수 -->
	<insert id="insertNotify" parameterType="auction.guad.dto.NotifyDto">
		INSERT INTO NOTIFY(ITEM_NUM, MEMBER_EMAIL, NOTIFY_TITLE, NOTIFY_CONTENTS, NOTIFY_TIME) 
			VALUES (#{itemNum}, #{memberEmail}, #{notifyTitle}, #{notifyContents}, now())
		<selectKey keyProperty="notifyNum" resultType="Integer">
        	select last_insert_id()
    	</selectKey>
	</insert>
	
	<!-- 신고 목록 조회 -->
	<select id="notifyList" resultType="auction.guad.dto.NotifyDto">
		SELECT NOTIFY_NUM, ITEM_NUM, NOTIFY_TITLE, NOTIFY_TIME FROM NOTIFY
	</select>

	<!-- 신고 상세조회 -->
	<select id="notifyDetail" resultType="auction.guad.dto.NotifyDto">
		SELECT NOTIFY_NUM, ITEM_NUM, MEMBER_EMAIL, NOTIFY_TITLE, NOTIFY_CONTENTS, NOTIFY_TIME FROM NOTIFY
		WHERE NOTIFY_NUM = #{notifyNum}
	</select>
	
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="auction.guad.mapper.SellItemResultMapper">

	<!-- 상품 구매 -->
	<insert id="insertSellItemResult" parameterType="auction.guad.vo.RequestTradeVo">
		INSERT INTO SELL_ITEM_RESULT
			(SELL_TYPE, SELLER_EMAIL, SELLER_PHONE, BUYER_EMAIL, 
			BUYER_PHONE, ADDRESS, ITEM_SUB, ITEM_PRICE, SOLD_DATE)
		VALUES(#{sellType}, #{sellerEmail}, #{sellerPhone}, #{buyerEmail},
			#{buyerPhone}, #{address}, #{itemSub}, #{itemPrice}, now())							
	</insert>
	
	<!-- 구매기록 조회 / 아이디 + desc limit 1 -->
	<select id="selectOneByBuyerEmail" resultType="auction.guad.dto.SellItemResultDto">
		SELECT * FROM SELL_ITEM_RESULT
		WHERE BUYER_EMAIL = #{buyerEmail}
		ORDER BY ITEM_NUM_RESULT DESC LIMIT 1
	</select>
</mapper>
